# 错误码汇总文档

## 📋 文档概述

**文档名称**: 错误码汇总  
**文档类型**: 技术规范  
**作者**: scccy  
**创建时间**: 2025-01-27  
**最后更新**: 2025-01-27  

### 文档目的
本文档汇总了系统中所有模块的错误码定义，为开发人员提供统一的错误码参考，确保错误处理的一致性和规范性。

## 🔢 错误码分类

### 1. 基础错误码 (HTTP状态码)
| 错误码 | 错误类型 | 错误描述 | 使用场景 |
|--------|----------|----------|----------|
| 200 | 成功 | 操作成功 | 所有成功响应 |
| 400 | 参数错误 | 请求参数不正确 | 参数验证失败 |
| 401 | 未授权 | 用户未登录或认证失败 | 认证失败 |
| 403 | 禁止访问 | 用户权限不足 | 权限不足 |
| 404 | 资源不存在 | 请求的资源不存在 | 资源不存在 |
| 405 | 方法不允许 | 请求方法不被允许 | HTTP方法错误 |
| 408 | 请求超时 | 请求处理超时 | 请求超时 |
| 409 | 状态冲突 | 资源状态不允许操作 | 状态冲突 |
| 413 | 文件过大 | 文件大小超过限制 | 文件上传 |
| 415 | 文件类型不支持 | 不支持的文件类型 | 文件上传 |
| 429 | 请求过于频繁 | 请求频率超限 | 限流 |
| 500 | 系统错误 | 系统内部错误 | 系统异常 |
| 502 | 网关错误 | 网关服务错误 | 网关异常 |
| 503 | 服务不可用 | 后端服务不可用 | 服务不可用 |

### 2. 用户相关错误码 (1000-1999)
| 错误码 | 错误类型 | 错误描述 | 模块 |
|--------|----------|----------|------|
| 1001 | 用户不存在 | 指定的用户不存在 | service-user |
| 1002 | 用户已存在 | 用户名或手机号已存在 | service-user |
| 1003 | 密码错误 | 用户密码错误 | service-user |
| 1004 | 账号已被禁用 | 用户账号已被禁用 | service-user |
| 1005 | 令牌已过期 | JWT令牌已过期 | service-user |
| 1006 | 令牌无效 | JWT令牌无效 | service-user |
| 1007 | 用户档案不存在 | 用户档案信息不存在 | service-user |
| 1008 | 用户头像上传失败 | 用户头像上传操作失败 | service-user |
| 1009 | 用户权限不足 | 用户权限不足以执行操作 | service-user |

### 3. 认证相关错误码 (1100-1199)
| 错误码 | 错误类型 | 错误描述 | 模块 |
|--------|----------|----------|------|
| 1101 | 认证失败 | 认证过程失败 | service-auth |
| 1102 | 认证令牌缺失 | 未提供认证令牌 | service-auth |
| 1103 | 认证令牌已过期 | 认证令牌已过期 | service-auth |
| 1104 | 认证令牌无效 | 认证令牌格式或签名无效 | service-auth |
| 1105 | 用户账号已被禁用 | 用户账号被禁用或待审核 | service-auth |
| 1106 | 用户名或密码错误 | 登录凭据错误 | service-auth |

### 4. 核心服务错误码 (2000-3999)
| 错误码 | 错误类型 | 错误描述 | 模块 |
|--------|----------|----------|------|
| 2000 | 核心服务错误 | 核心服务通用错误 | 所有核心服务 |
| 2001 | 核心服务不可用 | 核心服务不可用 | 所有核心服务 |
| 2002 | 核心服务超时 | 核心服务超时 | 所有核心服务 |
| 2003 | 核心服务配置错误 | 核心服务配置错误 | 所有核心服务 |

#### 21xx: 发布者服务错误 (core-publisher)
| 错误码 | 错误类型 | 错误描述 | 模块 |
|--------|----------|----------|------|
| 2101 | 任务不存在 | 指定的任务不存在 | core-publisher |
| 2102 | 任务已完成 | 任务已经完成，不能重复操作 | core-publisher |
| 2103 | 任务已过期 | 任务已过期，无法操作 | core-publisher |
| 2104 | 任务状态无效 | 任务状态不允许当前操作 | core-publisher |
| 2105 | 任务审核记录不存在 | 指定的审核记录不存在 | core-publisher |
| 2106 | 任务审核状态无效 | 审核状态不允许当前操作 | core-publisher |
| 2107 | 任务完成记录不存在 | 指定的完成记录不存在 | core-publisher |
| 2108 | 任务配置错误 | 任务配置格式或内容错误 | core-publisher |
| 2109 | 任务验证失败 | 任务参数验证失败 | core-publisher |
| 2110 | 任务发布失败 | 任务发布操作失败 | core-publisher |
| 2111 | 任务下架失败 | 任务下架操作失败 | core-publisher |
| 2112 | 任务删除失败 | 任务删除操作失败 | core-publisher |
| 2113 | 任务重复提交 | 任务重复提交，不允许 | core-publisher |

### 5. 第三方服务错误码 (4000-4999)
| 错误码 | 错误类型 | 错误描述 | 模块 |
|--------|----------|----------|------|
| 4000 | 第三方服务错误 | 第三方服务通用错误 | 所有第三方服务 |
| 4001 | 第三方服务不可用 | 第三方服务不可用 | 所有第三方服务 |
| 4002 | 第三方服务超时 | 第三方服务超时 | 所有第三方服务 |
| 4003 | 第三方服务配置错误 | 第三方服务配置错误 | 所有第三方服务 |

#### 41xx: OSS服务错误 (third-party-aliyunOss)
| 错误码 | 错误类型 | 错误描述 | 模块 |
|--------|----------|----------|------|
| 4101 | OSS服务错误 | OSS服务内部错误 | third-party-oss |
| 4102 | OSS上传错误 | OSS文件上传失败 | third-party-oss |
| 4103 | OSS下载错误 | OSS文件下载失败 | third-party-oss |
| 4104 | OSS删除错误 | OSS文件删除失败 | third-party-oss |
| 4105 | OSS访问被拒绝 | OSS访问权限不足 | third-party-oss |
| 4106 | OSS存储桶不存在 | 指定的存储桶不存在 | third-party-oss |
| 4107 | OSS对象不存在 | 指定的对象不存在 | third-party-oss |
| 4108 | OSS配额超限 | OSS存储配额超限 | third-party-oss |
| 4109 | OSS文件上传失败 | OSS文件上传操作失败 | third-party-oss |
| 4110 | OSS文件不存在 | OSS指定的文件不存在 | third-party-oss |
| 4111 | OSS文件大小超限 | OSS文件大小超过限制 | third-party-oss |
| 4112 | OSS文件类型不允许 | OSS不支持的文件类型 | third-party-oss |
| 4113 | OSS文件删除失败 | OSS文件删除操作失败 | third-party-oss |
| 4114 | OSS文件访问被拒绝 | OSS文件访问权限不足 | third-party-oss |
| 4115 | OSS文件下载失败 | OSS文件下载操作失败 | third-party-oss |
| 4116 | OSS文件处理失败 | OSS文件处理操作失败 | third-party-oss |
| 4117 | OSS文件存储错误 | OSS文件存储操作错误 | third-party-oss |

### 6. 网关相关错误码 (5000-5999)
| 错误码 | 错误类型 | 错误描述 | 模块 |
|--------|----------|----------|------|
| 5001 | 网关路由不存在 | 请求的路由不存在 | service-gateway |
| 5002 | 网关超时 | 网关处理超时 | service-gateway |
| 5003 | 网关服务不可用 | 网关服务不可用 | service-gateway |
| 5004 | 网关限流 | 请求频率超限 | service-gateway |
| 5005 | 网关CORS错误 | 跨域请求错误 | service-gateway |
| 5006 | 网关过滤器错误 | 网关过滤器处理错误 | service-gateway |

### 7. 数据库相关错误码 (7000-7999)
| 错误码 | 错误类型 | 错误描述 | 模块 |
|--------|----------|----------|------|
| 7001 | 数据库连接错误 | 数据库连接错误 | 所有模块 |
| 7002 | 数据库查询错误 | 数据库查询错误 | 所有模块 |
| 7003 | 数据库更新错误 | 数据库更新错误 | 所有模块 |
| 7004 | 数据库删除错误 | 数据库删除错误 | 所有模块 |
| 7005 | 数据库事务错误 | 数据库事务错误 | 所有模块 |
| 7006 | 数据库约束违反 | 数据库约束违反 | 所有模块 |

### 8. 缓存相关错误码 (8000-8999)
| 错误码 | 错误类型 | 错误描述 | 模块 |
|--------|----------|----------|------|
| 8001 | 缓存连接错误 | 缓存连接错误 | 所有模块 |
| 8002 | 缓存获取错误 | 缓存获取错误 | 所有模块 |
| 8003 | 缓存设置错误 | 缓存设置错误 | 所有模块 |
| 8004 | 缓存删除错误 | 缓存删除错误 | 所有模块 |
| 8005 | 缓存键不存在 | 缓存键不存在 | 所有模块 |

### 9. 消息队列相关错误码 (9000-9999)
| 错误码 | 错误类型 | 错误描述 | 模块 |
|--------|----------|----------|------|
| 9001 | 消息队列连接错误 | 消息队列连接错误 | 消息模块 |
| 9002 | 消息发送错误 | 消息发送错误 | 消息模块 |
| 9003 | 消息接收错误 | 消息接收错误 | 消息模块 |
| 9004 | 消息主题不存在 | 消息主题不存在 | 消息模块 |
| 9005 | 消息消费者错误 | 消息消费者错误 | 消息模块 |

## 🔧 错误码使用规范

### 1. 错误码分配原则
- **HTTP状态码**: 使用标准HTTP状态码表示基础错误
- **业务错误码**: 使用1000-9999范围内的错误码表示业务错误
- **模块隔离**: 不同模块使用不同的错误码范围
- **语义明确**: 错误码含义要明确，便于理解和维护
- **预留空间**: 为未构建的模块预留错误码空间

### 2. 错误码命名规范
- **英文命名**: 使用英文单词或短语命名
- **驼峰命名**: 使用驼峰命名法
- **语义清晰**: 错误码名称要能清楚表达错误含义
- **避免缩写**: 尽量避免使用缩写，提高可读性

### 3. 错误信息规范
- **中文描述**: 错误信息使用中文描述
- **简洁明了**: 错误信息要简洁明了
- **用户友好**: 错误信息要对用户友好
- **技术细节**: 避免在错误信息中暴露技术细节

### 4. 错误处理流程
```
1. 异常发生
   ↓
2. 异常拦截器捕获
   ↓
3. 异常分类处理
   ↓
4. 错误码映射
   ↓
5. 错误信息格式化
   ↓
6. 返回统一错误响应
```

## 📝 错误码维护

### 1. 新增错误码
- **需求分析**: 分析是否需要新增错误码
- **范围确定**: 确定错误码所属范围
- **命名规范**: 按照命名规范命名错误码
- **文档更新**: 更新错误码文档

### 2. 修改错误码
- **影响评估**: 评估修改对现有系统的影响
- **兼容性**: 考虑向后兼容性
- **文档同步**: 同步更新相关文档
- **测试验证**: 验证修改的正确性

### 3. 删除错误码
- **使用检查**: 检查错误码是否还在使用
- **影响评估**: 评估删除对系统的影响
- **文档清理**: 清理相关文档
- **代码清理**: 清理相关代码

## 🔗 相关文档

- [ErrorCode.java](../service/service-common/src/main/java/com/origin/common/entity/ErrorCode.java) - 错误码枚举定义
- [BusinessException.java](../service/service-common/src/main/java/com/origin/common/exception/BusinessException.java) - 业务异常类
- [ResultData.java](../service/service-common/src/main/java/com/origin/common/dto/ResultData.java) - 统一响应格式

## 📅 更新历史

- **2025-01-27**: 创建错误码汇总文档
- **2025-01-27**: 完善所有模块的错误码定义
- **2025-01-27**: 添加错误码使用规范和维护指南

---

**文档版本**: v1.0  
**创建时间**: 2025-01-27  
**维护人员**: scccy 