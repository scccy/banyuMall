# 模块文档标准化规则

**ID**: DEV-011  
**Name**: 模块文档标准化规则  
**Status**: Active  
**创建时间**: 2025-08-01  

## 触发情景 (Context/Trigger)
当新建微服务模块或对已有模块进行迭代时，需要遵循标准化的文档结构和开发流程。

## 指令 (Directive)

### 1. 文档结构标准化
- **必须 (MUST)** 每个模块在 `infra/moudleDocs/` 下包含6个标准化文档
- **必须 (MUST)** 按照标准命名规范创建文档
- **必须 (MUST)** 使用中文文档名称，便于理解
- **禁止 (MUST NOT)** 跳过任何必需的文档

### 2. 必需文档清单
```
infra/moudleDocs/{模块名称}/
├── 模块主体讨论.md           # 模块需求讨论和功能规划
├── 模块设计.md              # 模块详细设计文档
├── API接口说明.md           # API接口详细说明
├── API接口测试.md           # API接口测试文档
├── 模块迭代说明.md          # 模块迭代需求说明
└── 模块迭代设计.md          # 模块迭代设计文档
```

### 3. 新建模块工作流程（第一套框架）
- **必须 (MUST)** 按照5个步骤执行完整模块开发流程
- **必须 (MUST)** 每个步骤完成后获得用户确认
- **必须 (MUST)** 基于文档驱动进行开发
- **禁止 (MUST NOT)** 跳过任何步骤或用户确认环节

#### 3.1 步骤1：生成文件夹及模块主体讨论
- **必须 (MUST)** 在 `infra/moudleDocs/` 下创建模块文件夹
- **必须 (MUST)** 创建 `模块主体讨论.md` 文档
- **必须 (MUST)** 用户描述模块需求和功能范围
- **必须 (MUST)** 明确模块背景、目标、范围

#### 3.2 步骤2：功能拆分与模块确认
- **必须 (MUST)** AI总结主题内容并生成功能拆分建议
- **必须 (MUST)** 按业务功能、管理功能、接口功能、集成功能维度拆分
- **必须 (MUST)** 用户确认功能拆分方案
- **禁止 (MUST NOT)** 在用户未确认前进入下一步

#### 3.3 步骤3：设计模板生成
- **必须 (MUST)** 基于确认的功能拆分生成模块设计文档
- **必须 (MUST)** 设计数据库表结构、API接口规范、业务逻辑流程
- **必须 (MUST)** 填写核心注意事项（关键约束、特殊要求、风险提示、依赖关系）
- **必须 (MUST)** 用户确认设计模板
- **必须 (MUST)** 包含架构设计、数据设计、接口设计、安全设计、性能设计

#### 3.4 步骤4：API接口文档生成
- **必须 (MUST)** 基于模块设计生成API接口说明文档
- **必须 (MUST)** 详细设计每个API接口的请求参数和响应格式
- **必须 (MUST)** 标识哪些接口需要提供Feign客户端
- **必须 (MUST)** 生成API接口测试文档
- **必须 (MUST)** 用户确认API接口设计

#### 3.5 步骤5：微服务开发
- **必须 (MUST)** 按照模块设计开始开发对应的微服务
- **必须 (MUST)** 实现Feign客户端供其他微服务使用
- **必须 (MUST)** 完成项目结构搭建、数据库表创建、代码实现、配置和测试
- **必须 (MUST)** 用户确认功能实现和测试结果

### 4. 模块迭代工作流程（第二套框架）
- **必须 (MUST)** 按照5个步骤执行模块迭代流程
- **必须 (MUST)** 支持多次迭代，按日期标记迭代版本
- **必须 (MUST)** 确保文档与代码实现同步更新
- **禁止 (MUST NOT)** 在文档未更新的情况下发布迭代

#### 4.1 步骤1：生成迭代模板
- **必须 (MUST)** 创建 `模块迭代说明_YYYYMMDD_迭代描述.md` 文档
- **必须 (MUST)** 用户描述迭代需求和功能扩展
- **必须 (MUST)** 记录迭代版本和时间信息
- **必须 (MUST)** 明确迭代目标、范围、需求

#### 4.2 步骤2：功能拆分与确认
- **必须 (MUST)** AI分析迭代主题内容
- **必须 (MUST)** 将主题拆分成多个接口和功能点
- **必须 (MUST)** 分析对现有功能的影响
- **必须 (MUST)** 用户确认功能拆分方案

#### 4.3 步骤3：迭代设计生成
- **必须 (MUST)** 基于确认的功能拆分生成迭代设计文档
- **必须 (MUST)** 设计新增的数据库表结构、API接口、业务逻辑变更
- **必须 (MUST)** 用户确认迭代设计方案
- **必须 (MUST)** 包含兼容性设计

#### 4.4 步骤4：迭代开发
- **必须 (MUST)** 按照迭代设计进行开发
- **必须 (MUST)** 实现新增功能并集成到现有模块
- **必须 (MUST)** 更新Feign客户端
- **必须 (MUST)** 测试验证新功能

#### 4.5 步骤5：文档更新
- **必须 (MUST)** 更新设计模板、API接口、测试文档
- **必须 (MUST)** 确保文档与代码实现一致
- **必须 (MUST)** 更新模块迭代说明文档
- **必须 (MUST)** 用户确认文档更新完整性

### 5. 文档管理规范
- **必须 (MUST)** 使用标准化的文档模板
- **必须 (MUST)** 及时更新相关文档
- **必须 (MUST)** 重要文档变更需要团队评审
- **必须 (MUST)** 定期检查文档的完整性和准确性
- **禁止 (MUST NOT)** 文档与代码实现不一致

### 6. 质量保证要求
- **必须 (MUST)** 每个阶段都要进行质量检查
- **必须 (MUST)** 所有代码必须经过审查
- **必须 (MUST)** 每个功能都要进行测试验证
- **必须 (MUST)** 确保文档与代码实现一致
- **必须 (MUST)** 重要功能要进行性能测试

## 理由 (Justification)
此规则源于任务 `task_20250801_1512_module_design_rules_update.md`。在该任务中，建立了标准化的模块文档结构和两套完整的工作流程框架，确保模块开发的规范性和一致性。通过文档驱动开发，提高了开发效率，减少了沟通成本，保证了项目质量。

## 最佳实践
1. **文档先行**: 先完成文档设计，再进行代码开发
2. **用户确认**: 每个关键步骤都需要用户确认
3. **模板驱动**: 使用标准化的文档模板
4. **版本控制**: 重要变更需要版本标记
5. **同步更新**: 确保文档与代码实现同步
6. **质量检查**: 每个阶段都要进行质量检查

## 检查清单
- [ ] 模块是否包含6个必需文档
- [ ] 文档命名是否符合规范
- [ ] 是否按照工作流程执行
- [ ] 每个步骤是否获得用户确认
- [ ] 文档是否与代码实现一致
- [ ] 是否进行了质量检查
- [ ] 重要文档是否经过评审
- [ ] 迭代文档是否按日期标记

## 相关规则
- DEV-008: 微服务模块设计规则
- DEV-008_DOCUMENT_MANAGEMENT: 文档管理规则
- API-DOC-001: API文档规范 