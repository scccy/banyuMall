# 项目规则汇总

**创建时间**: 2025-07-30  
**最后更新**: 2025-01-27  
**版本**: 1.2  

## 📋 **规则分类总览**

### 🔧 **开发规范类 (DEV-*)**
- **DEV-001**: 基础开发规范
- **DEV-002**: 代码提交规范
- **DEV-003**: 测试规范
- **DEV-004**: 文档编写规范
- **DEV-005**: 错误处理规范
- **DEV-006**: 性能优化规范
- **DEV-007**: 网关接口同步规则
- **DEV-008**: 文档管理规则
- **DEV-009**: 单一职责原则
- **DEV-010**: Lombok@Data注解规范
- **DEV-012**: 统一响应数据类和实体类规范
- **DEV-013**: Maven资源文件管理规则
- **DEV-014**: 异常处理层次规则
- **DEV-015**: MyBatis-Plus分页查询规则

### 🏗️ **架构设计类 (LR-*)**
- **LR-001**: 缓存配置原则
- **LR-002**: MyBatis-Plus依赖版本一致性规则
- **LR-003**: 分层架构设计原则
- **LR-004**: 模块设计与文档标准化规则
- **LR-005-FEIGN-UNIFIED**: Feign客户端统一规范（合并LR-005和LR-008）
- **LR-006**: 微服务依赖排除规则
- **LR-007**: 路由一致性规范
- **LR-009**: 通用类优先common模块规则

### ⚙️ **配置管理类 (CONFIG-*)**
- **CONFIG-001**: 配置分离规则

### 📦 **依赖管理类 (DEP-*)**
- **DEP-001**: Maven依赖管理规则

### 🚀 **性能优化类 (PERF-*)**
- **PERF-001**: Spring Boot启动性能优化规则

### 🔐 **对象存储类 (OSS-*)**
- **OSS-001**: 对象存储服务规则

### 🎯 **初始化类 (INIT-*)**
- **INIT-001**: 项目初始化规则

## 📖 **规则详细说明**

### 🔧 **开发规范类**

#### DEV-001: 基础开发规范
- **触发**: 所有代码开发活动
- **核心**: 代码风格、命名规范、注释要求
- **文件**: `DEV-001.md`

#### DEV-002: 代码提交规范
- **触发**: Git提交操作
- **核心**: 提交信息格式、分支管理、代码审查
- **文件**: `DEV-002.md`

#### DEV-003: 测试规范
- **触发**: 单元测试、集成测试编写
- **核心**: 测试覆盖率、测试命名、测试数据管理
- **文件**: `DEV-003.md`

#### DEV-004: 文档编写规范
- **触发**: 技术文档编写
- **核心**: 文档结构、Markdown格式、图表使用
- **文件**: `DEV-004.md`

#### DEV-005: 错误处理规范
- **触发**: 异常处理、错误码定义
- **核心**: 统一异常处理、错误码规范、日志记录
- **文件**: `DEV-005.md`

#### DEV-006: 性能优化规范
- **触发**: 性能优化相关开发
- **核心**: 数据库优化、缓存策略、代码性能
- **文件**: `DEV-006.md`

#### DEV-007: 网关接口同步规则
- **触发**: 新模块创建或API接口变更
- **核心**: 网关路由配置、过滤器更新、监控配置
- **重要**: 新微服务创建后必须立即在网关中添加路由配置
- **文件**: `DEV-007_GATEWAY_INTERFACE_SYNC.md`

#### DEV-008: 文档管理规则
- **触发**: STATE或TEMP目录文件超过10个
- **核心**: 文档汇总、分类合并、版本控制
- **文件**: `DEV-008.md`

### 🏗️ **架构设计类**

#### LR-001: 缓存配置原则
- **触发**: 需要为微服务添加缓存功能时
- **核心**: 非必要不添加、独立配置、性能分析
- **文件**: `LR-001_CACHE_CONSISTENCY.md`

#### LR-002: MyBatis-Plus依赖版本一致性规则
- **触发**: 新微服务模块创建或MyBatis-Plus依赖配置修改
- **核心**: 使用正确的MyBatis-Plus依赖、添加@MapperScan注解、避免FactoryBean错误
- **文件**: `LR-002_MYBATIS_PLUS_DEPENDENCY_CONSISTENCY.md`

#### LR-003: 分层架构设计原则
- **触发**: Controller层直接使用工具类或编写复杂业务逻辑时
- **核心**: Controller层职责边界、Service层业务逻辑、依赖注入原则
- **文件**: `LR-003_LAYERED_ARCHITECTURE.md`

#### LR-004: 模块设计与文档标准化规则
- **触发**: 新建微服务模块、对已有模块进行迭代或重构时
- **核心**: 设计优先原则+标准化文档结构，包含两套工作流程（新建模块5步骤+迭代模块5步骤），使用Excel表格格式和跳转链接
- **文件**: `LR-004_MODULE_DESIGN_AND_DOCUMENTATION_STANDARD.md`

#### LR-005: Feign客户端配置规范
- **触发**: 多个Feign客户端指向同一目标服务时
- **核心**: 使用path属性避免Bean名称冲突、指定扫描包范围
- **文件**: `LR-005_FEIGN_CLIENT_CONFIGURATION.md`

#### LR-006: 微服务依赖排除规则
- **触发**: 新微服务模块创建或依赖配置修改
- **核心**: 排除Logback和Jackson、统一使用Log4j2和FastJSON2
- **文件**: `LR-006_MICROSERVICE_DEPENDENCY_EXCLUSION.md`

#### LR-007: 路由一致性规范
- **触发**: 创建或修改Feign客户端时
- **核心**: Feign客户端路由必须与Controller路由保持一致
- **文件**: `LR-007_ROUTE_CONSISTENCY.md`

### ⚙️ **配置管理类**

#### CONFIG-001: 配置分离规则
- **触发**: 应用配置管理
- **核心**: 环境配置分离、敏感信息管理、配置版本控制
- **文件**: `CONFIG-001_CONFIGURATION_SEPARATION.md`

### 📦 **依赖管理类**

#### DEP-001: Maven依赖管理规则
- **触发**: Maven依赖配置
- **核心**: 依赖版本管理、冲突解决、传递依赖控制
- **文件**: `DEP-001_MAVEN_DEPENDENCY_MANAGEMENT.md`

### 🚀 **性能优化类**

#### PERF-001: Spring Boot启动性能优化规则
- **触发**: Spring Boot应用启动时间超过预期
- **核心**: BeanPostProcessor优化、自动配置优化、网络配置优化
- **文件**: `PERF-001_SPRING_BOOT_PERFORMANCE.md`

### 🔐 **对象存储类**

#### OSS-001: 对象存储服务规则
- **触发**: 文件上传、存储服务开发
- **核心**: 文件格式验证、存储策略、访问控制
- **文件**: `OSS-001.md`

### 🎯 **初始化类**

#### INIT-001: 项目初始化规则
- **触发**: 新项目创建
- **核心**: 项目结构、基础配置、开发环境搭建
- **文件**: `INIT-001.md`

## 🎯 **规则优先级**

### 🔴 **高优先级 (必须遵守)**
1. **LR-002**: MyBatis-Plus依赖版本一致性规则
2. **LR-003**: 模块设计与文档标准化规则
3. **LR-005-FEIGN-UNIFIED**: Feign客户端统一规范
4. **LR-006**: 微服务依赖排除规则
5. **LR-007**: 路由一致性规范
6. **LR-009**: 通用类优先common模块规则
7. **DEV-007**: 网关接口同步规则
8. **DEV-008**: 文档管理规则
9. **DEV-012**: 统一响应数据类和实体类规范
10. **DEV-014**: 异常处理层次规则
11. **DEV-015**: MyBatis-Plus分页查询规则
12. **PERF-001**: Spring Boot启动性能优化规则

### 🟡 **中优先级 (建议遵守)**
1. **DEV-001**: 基础开发规范
2. **DEV-005**: 错误处理规范
3. **CONFIG-001**: 配置分离规则
4. **DEP-001**: Maven依赖管理规则

### 🟢 **低优先级 (推荐遵守)**
1. **DEV-002**: 代码提交规范
2. **DEV-003**: 测试规范
3. **DEV-004**: 文档编写规范
4. **DEV-006**: 性能优化规范
5. **LR-001**: 缓存同步规则
6. **OSS-001**: 对象存储服务规则
7. **INIT-001**: 项目初始化规则

## 📝 **规则应用场景**

### 🚀 **新模块开发**
1. **LR-002**: MyBatis-Plus依赖版本一致性规则
2. **LR-003**: 模块设计与文档标准化规则（按模块名称创建文件夹组织文档）
3. **LR-005-FEIGN-UNIFIED**: Feign客户端统一规范
4. **LR-007**: 路由一致性规范
5. **DEV-007**: 网关接口同步规则
6. **LR-006**: 微服务依赖排除规则
7. **DEV-012**: 统一响应数据类和实体类规范
8. **DEV-001**: 基础开发规范
9. **DEV-005**: 错误处理规范

### 🔧 **代码开发**
1. **LR-005-FEIGN-UNIFIED**: Feign客户端统一规范
2. **LR-007**: 路由一致性规范
3. **DEV-012**: 统一响应数据类和实体类规范
4. **DEV-001**: 基础开发规范
5. **DEV-002**: 代码提交规范
6. **DEV-003**: 测试规范
7. **DEV-005**: 错误处理规范

### 📚 **文档管理**
1. **DEV-008**: 文档管理规则
2. **DEV-004**: 文档编写规范

### ⚙️ **配置管理**
1. **CONFIG-001**: 配置分离规则
2. **DEP-001**: Maven依赖管理规则

### 🚀 **性能优化**
1. **PERF-001**: Spring Boot启动性能优化规则
2. **DEV-006**: 性能优化规范
3. **LR-001**: 缓存配置原则

## 🔄 **规则更新流程**

### 1. 规则创建
- 创建新规则文件
- 更新规则汇总文档
- 添加到相应分类

### 2. 规则修改
- 更新规则文件
- 更新汇总文档
- 通知相关人员

### 3. 规则废弃
- 标记为废弃状态
- 保留历史记录
- 更新汇总文档

## 📊 **规则统计**

- **总规则数**: 24个
- **开发规范类**: 12个
- **架构设计类**: 8个（LR-001缓存配置原则、LR-002 MyBatis-Plus依赖版本一致性、LR-003模块设计与文档标准化、LR-005 Feign客户端配置、LR-006微服务依赖排除、LR-007路由一致性、LR-008 Spring配置类优先base模块、LR-009通用类优先common模块）
- **配置管理类**: 1个
- **依赖管理类**: 1个
- **性能优化类**: 1个
- **对象存储类**: 1个
- **初始化类**: 1个

## 📋 **模板文件**

- **设计模板**: `zinfra/moudleDocs/xxxxxx-design_templates.md`
- **API测试模板**: `zinfra/moudleDocs/xxxxxx-api-test-template.md`
- **开发文档模板**: `zinfra/moudleDocs/xxxxxx-development-template.md`
- **接口测试验证模板**: `zinfra/moudleDocs/xxxxxx-interface-test-validation-template.md`

## 🔗 **相关文档**

- `.docs/README-DOCS.md`: 文档管理说明
- `.docs/STATE/`: 状态基线文档
- `.docs/TEMP/`: 临时任务文档
- `.docs/PROCESS/`: 过程文档

## 📅 **更新历史**

- **2025-07-30**: 初始创建规则汇总
- **2025-07-30**: 添加DEV-007网关接口同步规则
- **2025-07-30**: 添加DEV-008文档管理规则
- **2025-07-30**: 添加LR-003微服务依赖排除规则
- **2025-01-27**: 添加LR-002模块设计优先规则
- **2025-01-27**: 更新LR-002模块设计优先规则，增加Excel表格格式和跳转链接要求
- **2025-01-27**: 更新LR-002模块设计优先规则，增加按模块名称创建文件夹组织文档的要求
- **2025-01-27**: 更新LR-002模块设计优先规则，增加开发文档生成要求和接口执行测试验证要求
- **2025-01-27**: 新增开发文档模板和接口测试验证模板
- **2025-08-01**: 新增DEV-012统一响应数据类和实体类规范
- **2025-08-01**: 新增LR-003 Feign客户端配置规范
- **2025-08-01**: 新增LR-004路由一致性规范
- **2025-08-02**: 新增LR-002 MyBatis-Plus依赖版本一致性规则
- **2025-08-02**: 规则ID冲突解决 - 重命名LR-003/LR-004规则，新增DEV-013
- **2025-01-27**: 新增LR-008 Spring配置类优先base模块规则
- **2025-01-27**: 新增LR-009通用类优先common模块规则
- **2025-01-27**: 新增DEV-014异常处理层次规则
- **2025-01-27**: 新增DEV-015 MyBatis-Plus分页查询规则 