# 开发规则：测试和文档管理

**ID**: DEV-005  
**Name**: 测试和文档管理规则  
**Status**: Active  
**创建时间**: 2025-07-30  

## 触发情景 (Context/Trigger)
当进行Java和Maven开发任务时，以及完成任何开发任务后。

## 指令 (Directive)

### 1. 测试规则
- **禁止 (MUST NOT)** 执行Java单元测试
- **禁止 (MUST NOT)** 执行Maven测试命令（如 `mvn test`）
- **禁止 (MUST NOT)** 运行集成测试
- **允许 (MAY)** 进行代码编译验证（如 `mvn compile`）
- **允许 (MAY)** 进行代码格式检查

### 2. 文档更新规则
- **必须 (MUST)** 在完成每个开发任务后更新 `readme.md` 中的项目结构
- **必须 (MUST)** 记录新增的功能模块和组件
- **必须 (MUST)** 更新模块状态（已完成/进行中/待开发）
- **必须 (MUST)** 在完成任务索引文档中记录任务完成情况

### 3. 任务索引管理
- **必须 (MUST)** 维护 `TASK-INDEX.md` 文件作为完成任务索引
- **必须 (MUST)** 记录每个任务的完成时间、主要变更、相关文档
- **必须 (MUST)** 按时间倒序排列任务记录
- **必须 (MUST)** 包含任务类型分类（功能开发/配置优化/文档更新等）

## 理由 (Justification)
此规则源于开发效率优化需求：
1. **测试跳过**: 在快速开发阶段，跳过测试可以加快开发速度
2. **文档同步**: 确保项目文档与实际代码保持同步
3. **任务追踪**: 便于项目进度管理和历史回顾

## 执行流程

### 1. 开发阶段
```bash
# 允许的命令
./mvnw clean compile -pl service/service-auth
./mvnw clean package -DskipTests

# 禁止的命令
./mvnw test  # ❌ 禁止
./mvnw verify  # ❌ 禁止
```

### 2. 任务完成后
1. **更新readme.md**:
   - 添加新模块到项目结构
   - 更新模块状态
   - 更新技术栈信息

2. **更新TASK-INDEX.md**:
   - 添加任务记录
   - 记录主要变更
   - 链接相关文档

### 3. 文档同步检查
- 确保readme.md中的项目结构准确
- 确保TASK-INDEX.md包含最新任务
- 确保相关文档路径正确

## 例外情况
- **生产环境部署前**: 必须执行完整的测试套件
- **重要功能发布**: 必须进行回归测试
- **代码审查**: 审查人员可以要求执行特定测试

## 相关规则
- [DEV-004.md](./DEV-004.md) - Git提交规则
- [PERF-001.md](./PERF-001.md) - Spring Boot启动性能优化规则 