# 半语积分商城 - 文档驱动开发框架

## 项目概述
半语积分商城是一个基于微服务架构的积分任务平台，支持B端发布任务、C端完成任务获得积分，并将积分同步到有赞商城。

## 文档结构说明

### 📁 STATE/ - 事实基线
存放描述项目当前状态的"事实基线"文档，是所有变更的出发点。
- `PROJECT-OVERVIEW.md` - 项目概述和业务逻辑
- `TECH-STACK.md` - 技术栈和版本信息
- `ARCHITECTURE.md` - 系统架构设计
- `DB-SCHEMA.md` - 数据库设计

### 📁 PROCESS/ - 过程流水
存放用于推动状态变更的"过程流水"文档。
- `TEMPLATES/` - 任务模板、提案模板等
- `PROPOSALS/` - 重大功能提案

### 📁 RULES/ - 开发规则
存放从过往经验中沉淀的、必须遵守的"开发规则"，拥有高优先级。
- `DEV-001.md` - 编码规范
- `DEV-002.md` - 微服务设计规范
- `DEV-003.md` - 数据库设计规范
- `DEV-004.md` - Git提交规范
- `DEV-005.md` - 测试和文档管理规则
- `DEV-006.md` - Docker容器化部署规则
- `DEV-007.md` - 微服务配置文件管理规则
- `DEV-008.md` - 微服务模块设计规则
- `DEV-011.md` - 模块文档标准化规则

### 📁 TEMP/ - 临时状态
存放任务执行过程中的临时状态文件。

## 微服务文档结构

### 📁 infra/moudleDocs/ - 模块文档
存放各微服务模块的标准化文档，每个模块包含6个必需文档：

#### 核心文档
- `微服务总体设计框架.md` - 微服务架构总体设计指导
- `数据库建表语句和表说明.md` - 数据库设计汇总文档
- `标准化模块文档结构模板.md` - 模块文档标准化模板
- `新建模块工作流程.md` - 模块开发工作流程指导

#### 模块文档结构
```
infra/moudleDocs/{模块名称}/
├── 模块主体讨论.md           # 模块需求讨论和功能规划
├── 模块设计.md              # 模块详细设计文档
├── API接口说明.md           # API接口详细说明
├── API接口测试.md           # API接口测试文档
├── 模块迭代说明.md          # 模块迭代需求说明
└── 模块迭代设计.md          # 模块迭代设计文档
```

#### 现有模块
- `core-publisher/` - 发布者服务模块
- `service-user/` - 用户服务模块
- `service-auth/` - 认证服务模块
- `service-gateway/` - 网关服务模块
- `service-common/` - 通用服务模块
- `service-base/` - 基础服务模块
- `third-party-oss/` - 第三方OSS服务模块

## 模块开发工作流程

### 第一套框架：完整模块开发流程
适用于新建模块的5步开发流程：
1. **生成文件夹及模块主体讨论** - 创建模块文档结构，明确需求
2. **功能拆分与模块确认** - AI总结并生成功能拆分建议
3. **设计模板生成** - 基于功能拆分生成设计文档
4. **API接口文档生成** - 基于设计生成API接口文档
5. **微服务开发** - 按照设计开发对应的微服务

### 第二套框架：模块迭代流程
适用于已有模块迭代的5步流程：
1. **生成迭代模板** - 创建迭代需求文档
2. **功能拆分与确认** - AI分析并拆分迭代功能点
3. **迭代设计生成** - 生成迭代设计文档
4. **迭代开发** - 按照设计进行开发
5. **文档更新** - 同步更新所有相关文档

## 核心原则
- **依据驱动**: 每个规划和重要建议都必须明确给出事实依据
- **基线先行**: 所有变更都基于STATE目录下的事实基线
- **状态外化**: 非平凡任务必须持久化到TEMP目录
- **测试驱动**: 逻辑相关编码工作必须先定义测试用例
- **模板驱动**: 创建新过程文档必须使用TEMPLATES下的模板
- **经验学习**: 从每次任务中萃取可复用的规则
- **文档驱动**: 所有开发工作都基于文档进行
- **用户确认**: 每个关键步骤都需要用户确认

## 快速开始
1. 新任务开始时，先查阅RULES目录下的相关规则
2. 在TEMP目录创建任务状态文件跟踪进度
3. 任务完成后，更新STATE目录下的相关基线文档
4. 如有新的经验规则，添加到RULES目录
5. 新建模块时，遵循标准化文档结构和两套工作流程框架

## 项目特色
- 微服务架构：Spring Boot 3.x + Spring Cloud
- 技术栈：Java 21, MySQL, Redis, MinIO
- 第三方集成：微信小程序、有赞商城
- 安全认证：JWT + Redis黑名单管理
- 文档驱动：标准化的模块文档结构和开发流程
- 质量保证：完整的工作流程和质量检查机制 