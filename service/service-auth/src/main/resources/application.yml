# 认证服务 - 主配置文件
# 注意：敏感信息已移至环境变量和Nacos配置中心
server:
  port: 8081
  servlet:
    context-path: /auth

spring:
  # 配置导入 - 从Nacos加载配置
  config:
    import: nacos:${spring.application.name}.${spring.cloud.nacos.config.file-extension}
  application:
    name: service-auth
  
  # Spring Security 默认用户配置
  security:
    user:
      name: ${SECURITY_USER_NAME:admin}
      password: ${SECURITY_USER_PASSWORD:admin123}
      roles: ${SECURITY_USER_ROLES:ADMIN}

  cloud:
    nacos:
      discovery:
        server-addr: ${NACOS_SERVER_ADDR:localhost:8848}
        username: ${NACOS_USERNAME:nacos}
        password: ${NACOS_PASSWORD:nacos}
        namespace: ${NACOS_NAMESPACE:public}
        group: ${NACOS_GROUP:DEFAULT_GROUP}
        # 注册配置
        register-enabled: true
        # 心跳间隔
        heart-beat-interval: 5000
        # 心跳超时时间
        heart-beat-timeout: 15000
        # 实例删除超时时间
        ip-delete-timeout: 30000
      config:
        server-addr: ${NACOS_SERVER_ADDR:localhost:8848}
        username: ${NACOS_USERNAME:nacos}
        password: ${NACOS_PASSWORD:nacos}
        namespace: ${NACOS_NAMESPACE:public}
        group: ${NACOS_GROUP:DEFAULT_GROUP}
        file-extension: yaml
        # 配置刷新
        refresh-enabled: true

# JWT配置
jwt:
  # JWT密钥 - 生产环境请使用环境变量
  secret: ${JWT_SECRET:your-secret-key-here-should-be-at-least-32-bytes-long}
  # 过期时间（毫秒）- 1小时
  expiration: ${JWT_EXPIRATION:3600000}
  # 令牌前缀
  token-prefix: ${JWT_TOKEN_PREFIX:Bearer}
  # 刷新令牌过期时间（毫秒）- 24小时
  refresh-expiration: ${JWT_REFRESH_EXPIRATION:86400000}
  # 是否启用黑名单
  enable-blacklist: ${JWT_ENABLE_BLACKLIST:true}
  # Redis黑名单前缀
  blacklist-prefix: ${JWT_BLACKLIST_PREFIX:token:blacklist:}
  # Redis有效令牌前缀
  valid-token-prefix: ${JWT_VALID_TOKEN_PREFIX:token:valid:}